<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="utf-8">
<title>스팸문자 구분기</title>
<link type = "text/css" rel = "stylesheet" href = "style.css">
</head>

<body>
<h3>스팸 문자인지 확인해볼수 있습니다</h3>
<hr>
<form id="form">
   <b>문자 내용</b>을 넣으세요<br>
   <textarea id="spamM" name="spamM"></textarea>
   <button class="button" type = "submit">확인하기</button>
</form>

<div id = "result"></div>

<script>
   const resultDiv = document.getElementById("result");
   const form = document.getElementById("form");

   form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const spamM = document.getElementById("spamM").value;
      
      resultDiv.textContent = "구분중...";

      try {
         const response = await fetch("https://backend-h-nine.vercel.app/api/ssseenAI_h", {
            method : "POST",
            headers : {
               "Content-Type" : "application/json",
            },
            body : JSON.stringify({spamM}),
         });

         const data = await response.json();

         if (response.ok) {
            resultDiv.textContent = data.answer;
         } else {
            resultDiv.textContent = `오류: ${data.error}`;
         }
      } catch (err) {
         resultDiv.textContent = "서버와 통신 중 오류가 발생했습니다.";
         console.error(err);
      }
   });
</script>
</body>
</html>
